var core=angular.module("ngErrorHandler.core",[]),ui=angular.module("ngErrorHandler.ui",[]);core.constant("httpErrors",{0:"Der Server ist nicht erreichbar..",404:"Dieser Dienst existiert nicht.",405:"Zugriffsfehler.",500:"Unbekannte Serverfehler."}),core.constant("errorHandlerConfig",{model:{alerts:"alerts"},customErrorHandler:!1,templateUrl:"holi-error-handler-ui/error-handler-config.ng.html",template:'<alert ng-repeat="alert in alerts" type="{{alert.type}}" close="alerts.splice($index, 1)">{{::alert.msg}}</alert>',feedbackAttach:!1}),core.provider("errorHandlerService",function(){"use strict";function a(a,b,c){return angular.extend(function(){var d=a.get("errorHandlerService");return d.call(c,b,arguments)},c)}var b=["$delegate","$injector",function(b,c){for(var d in b)angular.isFunction(b[d])&&(b[d]=a(c,b,b[d]));return b}];return{decorate:function(a,c){angular.forEach(c,function(c){a.decorator(c,b)})},$get:["$log","$injector","feedbackUI","errorHandlerConfig","httpErrors",function(a,b,c,d,e){var f={errors:[],resolveErrorCode:function(c,f,g){f&&(d.customErrorHandler?b.get(d.customErrorHandler).resolve(f,g):(f&&!angular.isUndefined(f.status)?f=e[f.status]:f&&f.message&&(f=f.message),angular.isString(f)||(f="Ein unbekannter Fehler ist aufgetreten."),c&&c.description&&(f="Aufruf zu "+c.description+" war fehlerhaft."),a.error("Es ist ein Fehler aufgetreten: "+f),g(f)))},funcError:function(a,b){f.resolveErrorCode(a,b,function(a){d.feedbackAttach&&c.appendErrorMsg(a),f.errors.push(a)})},call:function(b,c,d){a.debug("Function called: ",b.name||b);var e;try{e=b.apply(c,d)}catch(g){throw f.funcError(b,g),g}var h=e&&e.$promise||e;return h&&angular.isFunction(h.then)&&angular.isFunction(h["catch"])&&f.async(b,h),e},async:function(a,b){return b["catch"](function(b){f.funcError(a,b)}),b}};return f}]}}),core.factory("httpErrorInterceptor",function(){"use strict";return{request:function(a){return a.timeout=3e3,a}}}),core.config(["$provide","$httpProvider",function(a,b){"use strict";b.interceptors.push("httpErrorInterceptor"),a.decorator("$exceptionHandler",["$delegate",function(a){return function(b,c){a(b,c)}}])}]),ui.factory("feedbackUI",["errorHandlerConfig","$timeout","$rootScope",function(a,b,c){"use strict";return{appendErrorMsg:function(b){c[a.model.alerts]||(c[a.model.alerts]=[]),c[a.model.alerts].push({type:"danger",msg:b})},appendInfoMsg:function(b){c[a.model.alerts]||(c[a.model.alerts]=[]),c[a.model.alerts].push({type:"info",msg:b})}}}]),ui.directive("uiErrorHandler",["$rootScope","errorHandlerConfig",function(a,b){"use strict";return{restrict:"A",compile:function(a){a.append(b.template)}}}]),ui.run(["$document","errorHandlerConfig","$templateCache",function(a,b,c){"use strict";a.find(".header").attr("ui-error-handler",""),b.template&&(b.templateUrl="$$angular-errorhandler-template$$",c.put(b.templateUrl,b.template))}]);